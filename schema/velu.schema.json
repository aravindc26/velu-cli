{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://velu.dev/schema/velu.schema.json",
  "title": "Velu Configuration",
  "description": "Configuration schema for velu.json — the core config file for Velu documentation sites.",
  "type": "object",
  "required": ["navigation"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Path or URL to the JSON schema for editor validation."
    },
    "theme": {
      "type": "string",
      "description": "Named theme preset that controls the overall look and feel. Supports Fumadocs presets and legacy Velu aliases.",
      "enum": ["neutral", "black", "vitepress", "dusk", "catppuccin", "ocean", "emerald", "ruby", "purple", "solar", "aspen", "violet", "maple", "palm", "willow", "linden", "almond"],
      "default": "neutral"
    },
    "colors": {
      "type": "object",
      "description": "Override the theme's accent colors.",
      "properties": {
        "primary": {
          "type": "string",
          "description": "Primary brand color (hex). Used as accent in both light and dark modes unless overridden.",
          "pattern": "^#[0-9a-fA-F]{6}$"
        },
        "light": {
          "type": "string",
          "description": "Accent color for light mode (hex). Overrides primary in light mode.",
          "pattern": "^#[0-9a-fA-F]{6}$"
        },
        "dark": {
          "type": "string",
          "description": "Accent color for dark mode (hex). Overrides primary in dark mode.",
          "pattern": "^#[0-9a-fA-F]{6}$"
        }
      },
      "additionalProperties": false
    },
    "appearance": {
      "type": "string",
      "description": "Controls light/dark mode behavior.",
      "enum": ["system", "light", "dark"],
      "default": "system"
    },
    "styling": {
      "type": "object",
      "description": "Fine-grained styling options.",
      "properties": {
        "codeblocks": {
          "type": "object",
          "description": "Code block styling options.",
          "properties": {
            "theme": {
              "description": "Shiki theme for syntax highlighting. Use a string for a single theme, or an object with light/dark keys.",
              "oneOf": [
                { "type": "string" },
                {
                  "type": "object",
                  "properties": {
                    "light": { "type": "string" },
                    "dark": { "type": "string" }
                  },
                  "required": ["light", "dark"],
                  "additionalProperties": false
                }
              ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "navigation": {
      "type": "object",
      "description": "Defines the site navigation hierarchy: tabs → groups → pages. Groups must belong to a tab.",
      "required": ["tabs"],
      "properties": {
        "tabs": {
          "type": "array",
          "description": "Top-level navigation tabs. Each tab contains groups and/or pages.",
          "items": {
            "$ref": "#/definitions/tab"
          },
          "minItems": 1
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "definitions": {
    "page": {
      "type": "string",
      "description": "Reference to a markdown file relative to the docs directory (without .md extension). E.g. 'quickstart' → docs/quickstart.md, 'writing-content/page' → docs/writing-content/page.md."
    },
    "group": {
      "type": "object",
      "description": "A group of pages, optionally nested.",
      "required": ["group", "slug", "pages"],
      "properties": {
        "group": {
          "type": "string",
          "description": "Display name for the group."
        },
        "slug": {
          "type": "string",
          "description": "URL slug prefix for pages in this group. Used as the route prefix: /<slug>/<page-basename>.",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "icon": {
          "type": "string",
          "description": "Icon identifier for the group."
        },
        "tag": {
          "type": "string",
          "description": "Optional badge/tag label displayed next to the group name."
        },
        "expanded": {
          "type": "boolean",
          "description": "Whether the group is expanded by default. Defaults to true.",
          "default": true
        },
        "pages": {
          "type": "array",
          "description": "Pages or nested groups within this group.",
          "items": {
            "oneOf": [
              { "$ref": "#/definitions/page" },
              { "$ref": "#/definitions/group" }
            ]
          }
        }
      },
      "additionalProperties": false
    },
    "tab": {
      "type": "object",
      "description": "A top-level navigation tab.",
      "required": ["tab", "slug"],
      "properties": {
        "tab": {
          "type": "string",
          "description": "Display name for the tab."
        },
        "slug": {
          "type": "string",
          "description": "URL slug prefix for pages in this tab. Used as the route prefix: /<slug>/<page-basename>.",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
        },
        "icon": {
          "type": "string",
          "description": "Icon identifier for the tab."
        },
        "href": {
          "type": "string",
          "description": "External link URL. When set, the tab links externally instead of showing pages.",
          "format": "uri"
        },
        "pages": {
          "type": "array",
          "description": "Standalone pages directly under this tab.",
          "items": {
            "$ref": "#/definitions/page"
          }
        },
        "groups": {
          "type": "array",
          "description": "Groups of pages under this tab.",
          "items": {
            "$ref": "#/definitions/group"
          }
        }
      },
      "additionalProperties": false,
      "oneOf": [
        {
          "required": ["href"],
          "not": {
            "anyOf": [
              { "required": ["pages"] },
              { "required": ["groups"] }
            ]
          }
        },
        {
          "not": { "required": ["href"] },
          "anyOf": [
            { "required": ["pages"] },
            { "required": ["groups"] }
          ]
        }
      ]
    }
  }
}
